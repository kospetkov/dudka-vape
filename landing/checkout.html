<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–û—Ñ–æ—Ä–º–ª–µ–Ω–Ω—è –∑–∞–º–æ–≤–ª–µ–Ω–Ω—è - DudkaVape</title>
    <meta name="description" content="–û—Ñ–æ—Ä–º–ª–µ–Ω–Ω—è –∑–∞–º–æ–≤–ª–µ–Ω–Ω—è –≤ DudkaVape - Premium vaping products">
    
    <!-- Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800;900&display=swap" rel="stylesheet">
    
    <!-- Custom Styles -->
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800;900&display=swap');

        :root {
            /* Core Theme Colors */
            --color-bg: #000000;
            --color-bg-secondary: #1C1C1E;
            --color-bg-tertiary: #2C2C2E;
            --color-primary: #00D9C5;
            --color-secondary: #7B61FF;
            --color-text-primary: #FFFFFF;
            --color-text-secondary: #EBEBF5;
            --color-border: #38383A;
            
            /* Glow Effects */
            --glow-cyan: 0 0 20px rgba(0, 217, 197, 0.6);
            --glow-purple: 0 0 20px rgba(123, 97, 255, 0.6);
            --glow-strong: 0 0 30px rgba(0, 217, 197, 0.8);
            
            /* Typography */
            --font-primary: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
            --font-weight-light: 300;
            --font-weight-normal: 400;
            --font-weight-medium: 500;
            --font-weight-semibold: 600;
            --font-weight-bold: 700;
            --font-weight-extrabold: 800;
            --font-weight-black: 900;
            
            /* Spacing */
            --spacing-xs: 0.25rem;
            --spacing-sm: 0.5rem;
            --spacing-md: 1rem;
            --spacing-lg: 1.5rem;
            --spacing-xl: 2rem;
            --spacing-2xl: 3rem;
            --spacing-3xl: 4rem;
            
            /* Border Radius */
            --radius-sm: 0.375rem;
            --radius-md: 0.5rem;
            --radius-lg: 0.75rem;
            --radius-xl: 1rem;
            --radius-2xl: 1.5rem;
            
            /* Transitions */
            --transition-fast: 0.15s ease;
            --transition-normal: 0.3s ease;
            --transition-slow: 0.5s ease;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        html {
            scroll-behavior: smooth;
        }

        body {
            font-family: var(--font-primary);
            background-color: var(--color-bg);
            color: var(--color-text-primary);
            line-height: 1.6;
            overflow-x: hidden;
        }

        .app {
            min-height: 100vh;
            background: linear-gradient(135deg, var(--color-bg) 0%, var(--color-bg-secondary) 100%);
            padding-top: 100px;
        }

        /* Header */
        .header {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            background: rgba(0, 0, 0, 0.9);
            backdrop-filter: blur(20px);
            border-bottom: 1px solid var(--color-border);
            z-index: 1000;
            padding: var(--spacing-md) 0;
        }

        .header-content {
            display: flex;
            align-items: center;
            justify-content: space-between;
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 var(--spacing-md);
        }

        .logo-container {
            display: flex;
            align-items: center;
            gap: var(--spacing-md);
        }

        .logo {
            width: 50px;
            height: 50px;
            background: linear-gradient(135deg, var(--color-primary), var(--color-secondary));
            border-radius: var(--radius-lg);
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: var(--font-weight-bold);
            font-size: 1.25rem;
            color: var(--color-bg);
            box-shadow: var(--glow-cyan);
        }

        .logo-text {
            font-size: 1.5rem;
            font-weight: var(--font-weight-bold);
            background: linear-gradient(135deg, var(--color-primary), var(--color-secondary));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .back-btn {
            background: none;
            border: none;
            color: var(--color-text-primary);
            font-size: 1rem;
            cursor: pointer;
            padding: var(--spacing-sm) var(--spacing-md);
            border-radius: var(--radius-md);
            transition: all var(--transition-fast);
            text-decoration: none;
        }

        .back-btn:hover {
            background: rgba(0, 217, 197, 0.1);
            color: var(--color-primary);
        }

        /* Main Content */
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 var(--spacing-md);
        }

        .checkout-title {
            font-size: 2rem;
            font-weight: var(--font-weight-bold);
            text-align: center;
            margin-bottom: var(--spacing-2xl);
            background: linear-gradient(135deg, var(--color-primary), var(--color-secondary));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .checkout-grid {
            display: grid;
            grid-template-columns: 2fr 1fr;
            gap: var(--spacing-3xl);
            margin-bottom: var(--spacing-3xl);
        }

        /* Checkout Form */
        .checkout-form {
            background: rgba(28, 28, 30, 0.8);
            backdrop-filter: blur(10px);
            border: 1px solid var(--color-border);
            border-radius: var(--radius-xl);
            padding: var(--spacing-2xl);
        }

        .form-section {
            margin-bottom: var(--spacing-2xl);
        }

        .form-section-title {
            font-size: 1.25rem;
            font-weight: var(--font-weight-semibold);
            margin-bottom: var(--spacing-lg);
            color: var(--color-primary);
        }

        .form-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: var(--spacing-lg);
        }

        .form-group {
            margin-bottom: var(--spacing-lg);
        }

        .form-label {
            display: block;
            margin-bottom: var(--spacing-sm);
            font-weight: var(--font-weight-medium);
            color: var(--color-text-primary);
        }

        .form-input, .form-select, .form-textarea {
            width: 100%;
            padding: var(--spacing-md);
            background: rgba(44, 44, 46, 0.8);
            border: 1px solid var(--color-border);
            border-radius: var(--radius-md);
            color: var(--color-text-primary);
            font-size: 1rem;
            transition: all var(--transition-fast);
        }

        .form-input:focus, .form-select:focus, .form-textarea:focus {
            outline: none;
            border-color: var(--color-primary);
            box-shadow: var(--glow-cyan);
        }

        .form-textarea {
            resize: vertical;
            min-height: 100px;
        }

        .radio-group {
            display: flex;
            flex-direction: column;
            gap: var(--spacing-md);
        }

        .radio-option {
            display: flex;
            align-items: center;
            padding: var(--spacing-md);
            background: rgba(44, 44, 46, 0.8);
            border: 1px solid var(--color-border);
            border-radius: var(--radius-md);
            cursor: pointer;
            transition: all var(--transition-fast);
        }

        .radio-option:hover {
            border-color: var(--color-primary);
        }

        .radio-option.selected {
            border-color: var(--color-primary);
            background: rgba(0, 217, 197, 0.1);
        }

        .radio-input {
            margin-right: var(--spacing-md);
            accent-color: var(--color-primary);
        }

        .radio-content {
            flex: 1;
        }

        .radio-title {
            font-weight: var(--font-weight-semibold);
            margin-bottom: var(--spacing-xs);
        }

        .radio-description {
            font-size: 0.875rem;
            color: var(--color-text-secondary);
        }

        /* Order Summary */
        .order-summary {
            background: rgba(28, 28, 30, 0.8);
            backdrop-filter: blur(10px);
            border: 1px solid var(--color-border);
            border-radius: var(--radius-xl);
            padding: var(--spacing-2xl);
            height: fit-content;
            position: sticky;
            top: 120px;
        }

        .summary-title {
            font-size: 1.25rem;
            font-weight: var(--font-weight-semibold);
            margin-bottom: var(--spacing-lg);
            color: var(--color-primary);
        }

        .summary-item {
            display: flex;
            align-items: center;
            gap: var(--spacing-md);
            padding: var(--spacing-md) 0;
            border-bottom: 1px solid var(--color-border);
        }

        .summary-item:last-child {
            border-bottom: none;
        }

        .summary-item-image {
            width: 60px;
            height: 60px;
            object-fit: cover;
            border-radius: var(--radius-md);
        }

        .summary-item-info {
            flex: 1;
        }

        .summary-item-name {
            font-weight: var(--font-weight-medium);
            margin-bottom: var(--spacing-xs);
        }

        .summary-item-price {
            color: var(--color-primary);
            font-weight: var(--font-weight-bold);
        }

        .summary-item-quantity {
            font-size: 0.875rem;
            color: var(--color-text-secondary);
        }

        .summary-total {
            border-top: 2px solid var(--color-border);
            padding-top: var(--spacing-lg);
            margin-top: var(--spacing-lg);
        }

        .total-row {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: var(--spacing-sm);
        }

        .total-label {
            color: var(--color-text-secondary);
        }

        .total-price {
            font-weight: var(--font-weight-semibold);
        }

        .total-row.final {
            font-size: 1.25rem;
            font-weight: var(--font-weight-bold);
            color: var(--color-primary);
            margin-top: var(--spacing-md);
            padding-top: var(--spacing-md);
            border-top: 1px solid var(--color-border);
        }

        /* Buttons */
        .btn {
            background: linear-gradient(135deg, var(--color-primary), var(--color-secondary));
            color: var(--color-bg);
            border: none;
            padding: var(--spacing-md) var(--spacing-xl);
            border-radius: var(--radius-lg);
            font-size: 1rem;
            font-weight: var(--font-weight-semibold);
            cursor: pointer;
            transition: all var(--transition-normal);
            box-shadow: var(--glow-cyan);
            width: 100%;
            margin-top: var(--spacing-lg);
        }

        .btn:hover {
            transform: translateY(-2px);
            box-shadow: var(--glow-strong);
        }

        .btn:disabled {
            background: var(--color-bg-tertiary);
            color: var(--color-text-secondary);
            cursor: not-allowed;
            transform: none;
            box-shadow: none;
        }

        .btn-secondary {
            background: var(--color-bg-tertiary);
            color: var(--color-text-primary);
            border: 1px solid var(--color-border);
            box-shadow: none;
        }

        .btn-secondary:hover {
            background: rgba(0, 217, 197, 0.1);
            border-color: var(--color-primary);
            transform: none;
            box-shadow: none;
        }

        /* Empty Cart */
        .empty-cart {
            text-align: center;
            padding: var(--spacing-3xl);
            color: var(--color-text-secondary);
        }

        .empty-cart-icon {
            font-size: 4rem;
            margin-bottom: var(--spacing-lg);
        }

        .empty-cart h3 {
            font-size: 1.5rem;
            margin-bottom: var(--spacing-sm);
            color: var(--color-text-primary);
        }

        /* Success Page */
        .success-page {
            text-align: center;
            padding: var(--spacing-3xl);
            display: none;
        }

        .success-icon {
            font-size: 4rem;
            margin-bottom: var(--spacing-lg);
            animation: pulseGlow 2s ease-in-out infinite;
        }

        .success-title {
            font-size: 2rem;
            font-weight: var(--font-weight-bold);
            margin-bottom: var(--spacing-lg);
            background: linear-gradient(135deg, var(--color-primary), var(--color-secondary));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .success-message {
            font-size: 1.125rem;
            color: var(--color-text-secondary);
            margin-bottom: var(--spacing-2xl);
            max-width: 600px;
            margin-left: auto;
            margin-right: auto;
        }

        .order-number {
            font-size: 1.25rem;
            font-weight: var(--font-weight-bold);
            color: var(--color-primary);
            margin-bottom: var(--spacing-lg);
        }

        /* Loading */
        .loading-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.8);
            backdrop-filter: blur(10px);
            display: none;
            align-items: center;
            justify-content: center;
            z-index: 10000;
        }

        .loading-spinner {
            width: 50px;
            height: 50px;
            border: 3px solid rgba(0, 217, 197, 0.3);
            border-top: 3px solid var(--color-primary);
            border-radius: 50%;
            animation: spin 1s linear infinite;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        /* Responsive Design */
        @media (max-width: 768px) {
            .checkout-grid {
                grid-template-columns: 1fr;
                gap: var(--spacing-xl);
            }

            .order-summary {
                position: static;
            }

            .form-grid {
                grid-template-columns: 1fr;
            }

            .container {
                padding: 0 var(--spacing-sm);
            }

            .checkout-title {
                font-size: 1.5rem;
            }

            .header-content {
                padding: 0 var(--spacing-sm);
            }

            .logo-text {
                font-size: 1.25rem;
            }

            .logo {
                width: 40px;
                height: 40px;
                font-size: 1rem;
            }
        }

        @media (max-width: 480px) {
            .container {
                padding: 0 var(--spacing-xs);
            }

            .checkout-form {
                padding: var(--spacing-xl);
            }

            .order-summary {
                padding: var(--spacing-xl);
            }

            .checkout-title {
                font-size: 1.25rem;
            }

            .logo-text {
                font-size: 1.125rem;
            }

            .logo {
                width: 35px;
                height: 35px;
                font-size: 0.875rem;
            }

            .success-title {
                font-size: 1.5rem;
            }
        }
    </style>
</head>
<body>
    <!-- Header -->
    <header class="header">
        <div class="header-content">
            <div class="logo-container">
                <div class="logo">
                    <span>DV</span>
                </div>
                <div class="logo-text">DudkaVape</div>
            </div>
            <a href="index.html" class="back-btn">‚Üê –ù–∞–∑–∞–¥ –¥–æ –º–∞–≥–∞–∑–∏–Ω—É</a>
        </div>
    </header>

    <!-- Loading Overlay -->
    <div class="loading-overlay" id="loading-overlay">
        <div class="loading-spinner"></div>
    </div>

    <!-- Main App -->
    <div class="app" id="checkout-app">
        <div class="container">
            <!-- Checkout Form -->
            <div id="checkout-form-container">
                <h1 class="checkout-title">–û—Ñ–æ—Ä–º–ª–µ–Ω–Ω—è –∑–∞–º–æ–≤–ª–µ–Ω–Ω—è</h1>
                
                <div class="checkout-grid">
                    <!-- Customer Information -->
                    <div class="checkout-form">
                        <div class="form-section">
                            <h2 class="form-section-title">–ö–æ–Ω—Ç–∞–∫—Ç–Ω–∞ —ñ–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—è</h2>
                            <div class="form-grid">
                                <div class="form-group">
                                    <label class="form-label">–Ü–º'—è *</label>
                                    <input type="text" class="form-input" id="customer-name" placeholder="–í–∞—à–µ —ñ–º'—è" required>
                                </div>
                                <div class="form-group">
                                    <label class="form-label">–¢–µ–ª–µ—Ñ–æ–Ω *</label>
                                    <input type="tel" class="form-input" id="customer-phone" placeholder="+380XXXXXXXXX" required>
                                </div>
                                <div class="form-group">
                                    <label class="form-label">Email *</label>
                                    <input type="email" class="form-input" id="customer-email" placeholder="your@email.com" required>
                                </div>
                            </div>
                        </div>

                        <!-- Delivery Method -->
                        <div class="form-section">
                            <h2 class="form-section-title">–°–ø–æ—Å—ñ–± –¥–æ—Å—Ç–∞–≤–∫–∏</h2>
                            <div class="radio-group">
                                <label class="radio-option" data-method="nova-poshta">
                                    <input type="radio" name="delivery-method" value="nova-poshta" class="radio-input" checked>
                                    <div class="radio-content">
                                        <div class="radio-title">–ù–æ–≤–∞ –ü–æ—à—Ç–∞</div>
                                        <div class="radio-description">–î–æ—Å—Ç–∞–≤–∫–∞ –¥–æ –≤—ñ–¥–¥—ñ–ª–µ–Ω–Ω—è –∞–±–æ –∫—É—Ä'—î—Ä–æ–º</div>
                                    </div>
                                </label>
                                <label class="radio-option" data-method="pickup">
                                    <input type="radio" name="delivery-method" value="pickup" class="radio-input">
                                    <div class="radio-content">
                                        <div class="radio-title">–°–∞–º–æ–≤–∏–≤—ñ–∑</div>
                                        <div class="radio-description">–ó–∞–±–µ—Ä–µ—Ç–µ —Å–∞–º–æ—Å—Ç—ñ–π–Ω–æ –∑ –Ω–∞—à–æ–≥–æ –º–∞–≥–∞–∑–∏–Ω—É</div>
                                    </div>
                                </label>
                            </div>
                        </div>

                        <!-- Nova Poshta Fields -->
                        <div id="nova-poshta-fields" class="form-section">
                            <h2 class="form-section-title">–ê–¥—Ä–µ—Å–∞ –¥–æ—Å—Ç–∞–≤–∫–∏</h2>
                            <div class="form-grid">
                                <div class="form-group">
                                    <label class="form-label">–ú—ñ—Å—Ç–æ</label>
                                    <select class="form-select" id="delivery-city">
                                        <option value="">–û–±–µ—Ä—ñ—Ç—å –º—ñ—Å—Ç–æ</option>
                                        <option value="1">–ö–∏—ó–≤</option>
                                        <option value="2">–•–∞—Ä–∫—ñ–≤</option>
                                        <option value="3">–û–¥–µ—Å–∞</option>
                                        <option value="4">–î–Ω—ñ–ø—Ä–æ</option>
                                        <option value="5">–õ—å–≤—ñ–≤</option>
                                    </select>
                                </div>
                                <div class="form-group">
                                    <label class="form-label">–í—ñ–¥–¥—ñ–ª–µ–Ω–Ω—è</label>
                                    <select class="form-select" id="delivery-warehouse">
                                        <option value="">–û–±–µ—Ä—ñ—Ç—å –≤—ñ–¥–¥—ñ–ª–µ–Ω–Ω—è</option>
                                    </select>
                                </div>
                            </div>
                        </div>

                        <!-- Payment Method -->
                        <div class="form-section">
                            <h2 class="form-section-title">–°–ø–æ—Å—ñ–± –æ–ø–ª–∞—Ç–∏</h2>
                            <div class="radio-group">
                                <label class="radio-option" data-payment="cod">
                                    <input type="radio" name="payment-method" value="cod" class="radio-input" checked>
                                    <div class="radio-content">
                                        <div class="radio-title">–û–ø–ª–∞—Ç–∞ –ø—Ä–∏ –æ—Ç—Ä–∏–º–∞–Ω–Ω—ñ</div>
                                        <div class="radio-description">–ì–æ—Ç—ñ–≤–∫–æ—é –∞–±–æ –∫–∞—Ä—Ç–∫–æ—é –ø—Ä–∏ –æ—Ç—Ä–∏–º–∞–Ω–Ω—ñ</div>
                                    </div>
                                </label>
                                <label class="radio-option" data-payment="card">
                                    <input type="radio" name="payment-method" value="card" class="radio-input">
                                    <div class="radio-content">
                                        <div class="radio-title">–û–ø–ª–∞—Ç–∞ –∫–∞—Ä—Ç–æ—é (LiqPay)</div>
                                        <div class="radio-description">–ë–µ–∑–ø–µ—á–Ω–∞ –æ–ø–ª–∞—Ç–∞ –æ–Ω–ª–∞–π–Ω</div>
                                    </div>
                                </label>
                            </div>
                        </div>

                        <!-- Comment -->
                        <div class="form-section">
                            <h2 class="form-section-title">–ö–æ–º–µ–Ω—Ç–∞—Ä –¥–æ –∑–∞–º–æ–≤–ª–µ–Ω–Ω—è</h2>
                            <div class="form-group">
                                <textarea class="form-textarea" id="order-comment" placeholder="–î–æ–¥–∞—Ç–∫–æ–≤–∞ —ñ–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—è..."></textarea>
                            </div>
                        </div>

                        <button class="btn" onclick="submitOrder()">–ü—ñ–¥—Ç–≤–µ—Ä–¥–∏—Ç–∏ –∑–∞–º–æ–≤–ª–µ–Ω–Ω—è</button>
                    </div>

                    <!-- Order Summary -->
                    <div class="order-summary">
                        <h2 class="summary-title">–í–∞—à–µ –∑–∞–º–æ–≤–ª–µ–Ω–Ω—è</h2>
                        <div id="order-items">
                            <!-- Items will be loaded here -->
                        </div>
                        <div class="summary-total">
                            <div class="total-row">
                                <span class="total-label">–†–∞–∑–æ–º:</span>
                                <span class="total-price" id="subtotal-price">0‚Ç¥</span>
                            </div>
                            <div class="total-row">
                                <span class="total-label">–î–æ—Å—Ç–∞–≤–∫–∞:</span>
                                <span class="total-price" id="delivery-price">0‚Ç¥</span>
                            </div>
                            <div class="total-row final">
                                <span class="total-label">–î–æ —Å–ø–ª–∞—Ç–∏:</span>
                                <span class="total-price" id="total-price">0‚Ç¥</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Success Page -->
            <div class="success-page" id="success-page">
                <div class="success-icon">üéâ</div>
                <h1 class="success-title">–î—è–∫—É—î–º–æ –∑–∞ –∑–∞–º–æ–≤–ª–µ–Ω–Ω—è!</h1>
                <p class="success-message">
                    –í–∞—à–µ –∑–∞–º–æ–≤–ª–µ–Ω–Ω—è —É—Å–ø—ñ—à–Ω–æ –æ—Ñ–æ—Ä–º–ª–µ–Ω–æ. –ù–∞—à –º–µ–Ω–µ–¥–∂–µ—Ä –∑–≤'—è–∂–µ—Ç—å—Å—è –∑ –≤–∞–º–∏ –Ω–∞–π–±–ª–∏–∂—á–∏–º —á–∞—Å–æ–º –¥–ª—è –ø—ñ–¥—Ç–≤–µ—Ä–¥–∂–µ–Ω–Ω—è –¥–µ—Ç–∞–ª–µ–π.
                </p>
                <div class="order-number" id="order-number-display">
                    –ù–æ–º–µ—Ä –∑–∞–º–æ–≤–ª–µ–Ω–Ω—è: #<span id="order-number">0000</span>
                </div>
                <button class="btn" onclick="goHome()">–ü–æ–≤–µ—Ä–Ω—É—Ç–∏—Å—è –¥–æ –º–∞–≥–∞–∑–∏–Ω—É</button>
            </div>
        </div>
    </div>

    <script>
        // Mock data for cities and warehouses
        const mockCities = [
            { ref: "1", name: "–ö–∏—ó–≤" },
            { ref: "2", name: "–•–∞—Ä–∫—ñ–≤" },
            { ref: "3", name: "–û–¥–µ—Å–∞" },
            { ref: "4", name: "–î–Ω—ñ–ø—Ä–æ" },
            { ref: "5", name: "–õ—å–≤—ñ–≤" }
        ];

        const mockWarehouses = {
            "1": ["–í—ñ–¥–¥—ñ–ª–µ–Ω–Ω—è ‚Ññ1", "–í—ñ–¥–¥—ñ–ª–µ–Ω–Ω—è ‚Ññ2", "–í—ñ–¥–¥—ñ–ª–µ–Ω–Ω—è ‚Ññ3"],
            "2": ["–í—ñ–¥–¥—ñ–ª–µ–Ω–Ω—è ‚Ññ1", "–í—ñ–¥–¥—ñ–ª–µ–Ω–Ω—è ‚Ññ2"],
            "3": ["–í—ñ–¥–¥—ñ–ª–µ–Ω–Ω—è ‚Ññ1", "–í—ñ–¥–¥—ñ–ª–µ–Ω–Ω—è ‚Ññ2", "–í—ñ–¥–¥—ñ–ª–µ–Ω–Ω—è ‚Ññ3", "–í—ñ–¥–¥—ñ–ª–µ–Ω–Ω—è ‚Ññ4"],
            "4": ["–í—ñ–¥–¥—ñ–ª–µ–Ω–Ω—è ‚Ññ1"],
            "5": ["–í—ñ–¥–¥—ñ–ª–µ–Ω–Ω—è ‚Ññ1", "–í—ñ–¥–¥—ñ–ª–µ–Ω–Ω—è ‚Ññ2"]
        };

        // Cart data
        let cart = JSON.parse(localStorage.getItem('dudkavape_cart')) || [];
        let deliveryPrice = 0;

        // Initialize checkout
        document.addEventListener('DOMContentLoaded', function() {
            if (cart.length === 0) {
                showEmptyCart();
            } else {
                loadOrderSummary();
                setupEventListeners();
            }
        });

        function showEmptyCart() {
            document.getElementById('checkout-form-container').innerHTML = `
                <div class="empty-cart">
                    <div class="empty-cart-icon">üõí</div>
                    <h3>–í–∞—à –∫–æ—à–∏–∫ –ø–æ—Ä–æ–∂–Ω—ñ–π</h3>
                    <p>–î–æ–¥–∞–π—Ç–µ —Ç–æ–≤–∞—Ä–∏ –¥–æ –∫–æ—à–∏–∫–∞, —â–æ–± –æ—Ñ–æ—Ä–º–∏—Ç–∏ –∑–∞–º–æ–≤–ª–µ–Ω–Ω—è</p>
                    <button class="btn" onclick="goHome()">–î–æ –ø–æ–∫—É–ø–æ–∫</button>
                </div>
            `;
        }

        function loadOrderSummary() {
            const orderItems = document.getElementById('order-items');
            const subtotalPrice = document.getElementById('subtotal-price');
            const deliveryPriceEl = document.getElementById('delivery-price');
            const totalPrice = document.getElementById('total-price');

            let subtotal = 0;
            
            orderItems.innerHTML = cart.map(item => {
                const itemTotal = item.price * item.quantity;
                subtotal += itemTotal;

                const variantsText = Object.entries(item.variants)
                    .map(([key, value]) => `${key}: ${value}`)
                    .join(', ');

                return `
                    <div class="summary-item">
                        <img src="${item.image}" alt="${item.name}" class="summary-item-image">
                        <div class="summary-item-info">
                            <div class="summary-item-name">${item.name}</div>
                            ${variantsText ? `<div class="summary-item-quantity">${variantsText}</div>` : ''}
                            <div class="summary-item-price">${item.price}‚Ç¥ √ó ${item.quantity}</div>
                        </div>
                    </div>
                `;
            }).join('');

            subtotalPrice.textContent = `${subtotal.toFixed(2)}‚Ç¥`;
            deliveryPriceEl.textContent = `${deliveryPrice}‚Ç¥`;
            totalPrice.textContent = `${(subtotal + deliveryPrice).toFixed(2)}‚Ç¥`;
        }

        function setupEventListeners() {
            // Delivery method change
            document.querySelectorAll('input[name="delivery-method"]').forEach(radio => {
                radio.addEventListener('change', function() {
                    updateDeliveryOptions();
                });
            });

            // City change
            document.getElementById('delivery-city').addEventListener('change', function() {
                loadWarehouses(this.value);
            });

            // Form submission
            document.querySelector('.btn').addEventListener('click', submitOrder);
        }

        function updateDeliveryOptions() {
            const deliveryMethod = document.querySelector('input[name="delivery-method"]:checked').value;
            const novaPoshtaFields = document.getElementById('nova-poshta-fields');
            
            if (deliveryMethod === 'nova-poshta') {
                novaPoshtaFields.style.display = 'block';
                deliveryPrice = 60; // Mock delivery price
            } else {
                novaPoshtaFields.style.display = 'none';
                deliveryPrice = 0;
            }
            
            loadOrderSummary();
        }

        function loadWarehouses(cityId) {
            const warehouseSelect = document.getElementById('delivery-warehouse');
            const warehouses = mockWarehouses[cityId] || [];
            
            warehouseSelect.innerHTML = '<option value="">–û–±–µ—Ä—ñ—Ç—å –≤—ñ–¥–¥—ñ–ª–µ–Ω–Ω—è</option>';
            warehouses.forEach(warehouse => {
                const option = document.createElement('option');
                option.value = warehouse;
                option.textContent = warehouse;
                warehouseSelect.appendChild(option);
            });
        }

        function submitOrder() {
            // Show loading
            document.getElementById('loading-overlay').style.display = 'flex';

            // Simulate order processing
            setTimeout(() => {
                // Generate order number
                const orderNumber = Date.now().toString().slice(-6);
                
                // Create order object
                const order = {
                    id: orderNumber,
                    customer: {
                        name: document.getElementById('customer-name').value,
                        phone: document.getElementById('customer-phone').value,
                        email: document.getElementById('customer-email').value
                    },
                    items: cart,
                    deliveryMethod: document.querySelector('input[name="delivery-method"]:checked').value,
                    paymentMethod: document.querySelector('input[name="payment-method"]:checked').value,
                    deliveryAddress: getDeliveryAddress(),
                    comment: document.getElementById('order-comment').value,
                    total: calculateTotal(),
                    status: '–ù–æ–≤–∏–π',
                    date: new Date().toISOString()
                };

                // Save order to localStorage
                const orders = JSON.parse(localStorage.getItem('dudkavape_orders')) || [];
                orders.push(order);
                localStorage.setItem('dudkavape_orders', JSON.stringify(orders));

                // Clear cart
                localStorage.removeItem('dudkavape_cart');
                cart = [];

                // Hide loading
                document.getElementById('loading-overlay').style.display = 'none';

                // Show success page
                showSuccessPage(orderNumber);
            }, 2000);
        }

        function getDeliveryAddress() {
            const deliveryMethod = document.querySelector('input[name="delivery-method"]:checked').value;
            
            if (deliveryMethod === 'nova-poshta') {
                const city = document.getElementById('delivery-city').selectedOptions[0]?.text;
                const warehouse = document.getElementById('delivery-warehouse').value;
                return `${city}, ${warehouse}`;
            }
            
            return '–°–∞–º–æ–≤–∏–≤—ñ–∑';
        }

        function calculateTotal() {
            const subtotal = cart.reduce((sum, item) => sum + (item.price * item.quantity), 0);
            return subtotal + deliveryPrice;
        }

        function showSuccessPage(orderNumber) {
            document.getElementById('checkout-form-container').style.display = 'none';
            document.getElementById('success-page').style.display = 'block';
            document.getElementById('order-number').textContent = orderNumber;
        }

        function goHome() {
            window.location.href = 'index.html';
        }

        // Initialize delivery options
        updateDeliveryOptions();
    </script>
</body>
</html>